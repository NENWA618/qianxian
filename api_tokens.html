<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title>API Token 管理 - 千弦家族社区</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" href="qianxian.png">
  <link rel="stylesheet" href="main.css">
  <script src="utils.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/zxcvbn@4.4.2/dist/zxcvbn.js"></script>
  <script src="api_tokens.js" defer></script>
</head>
<body>
  <div class="api-token-list">
    <h2>API Token 管理</h2>
    <form id="api-token-create-form" autocomplete="off">
      <input type="text" id="token-desc" placeholder="用途描述（如：自动化脚本）" maxlength="64" required
        pattern="^[\u4e00-\u9fa5\w\s\-\(\)\[\]\.]{2,64}$"
        title="描述仅限中英文、数字、空格及-()[]等符号，2-64字符">
      <input type="date" id="token-expire" placeholder="过期日期（可选）">
      <button type="submit">新建Token</button>
    </form>
    <div id="api-token-create-msg" class="form-msg"></div>
    <table>
      <thead>
        <tr>
          <th>Token</th>
          <th>描述</th>
          <th>创建时间</th>
          <th>过期时间</th>
          <th>状态</th>
          <th>操作</th>
        </tr>
      </thead>
      <tbody id="api-token-list-body">
        <tr><td colspan="6">加载中...</td></tr>
      </tbody>
    </table>
    <div class="token-tips">
      <ul>
        <li>Token描述仅限中英文、数字、空格及-()[]等符号，2-64字符。</li>
        <li>请妥善保存Token，仅显示前8后4位，完整Token仅生成时可见。</li>
        <li>Token接口已限流，频繁操作将被暂时封禁。</li>
        <li>如需API使用说明，请参见 <a href="zhinan.html" target="_blank">开发者指南</a>。</li>
      </ul>
    </div>
    <button onclick="window.location.href='index.html'">返回首页</button>
  </div>
</body>
</html>